#!/bin/bash
# TEMPLATE ONLY - DO NOT FILL IN WITH REAL VALUES
# Copy this file to a location outside the repository or to a different filename before filling in real values

# Development environment variables
# These will be set in the 'dev' GitHub environment
# Backend variables
export DEV_SQLALCHEMY_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-dev:europe-west4:db-dev"
export DEV_SQLALCHEMY_DB_MODE="develop"
export DEV_SQLALCHEMY_DB_DRIVER="postgresql"
export DEV_SQLALCHEMY_DB_USER="rhesis-user"
export DEV_SQLALCHEMY_DB_PASS="your-db-password"
export DEV_SQLALCHEMY_DB_HOST="/cloudsql/rhesis-dev:europe-west4:db-dev"
export DEV_SQLALCHEMY_DB_NAME="rhesis"
export DEV_LOG_LEVEL="DEBUG"
export DEV_AUTH0_DOMAIN="dev-tenant.auth0.com"
export DEV_AUTH0_AUDIENCE="https://api.dev-app.rhesis.ai"
export DEV_AUTH0_CLIENT_ID="your-auth0-client-id"
export DEV_AUTH0_CLIENT_SECRET="your-auth0-client-secret"
export DEV_AUTH0_SECRET_KEY="your-auth0-secret-key"
export DEV_JWT_SECRET_KEY="your-jwt-secret-key"
export DEV_JWT_ALGORITHM="HS256"
export DEV_JWT_ACCESS_TOKEN_EXPIRE_MINUTES="10080"
export DEV_FRONTEND_URL="https://dev-app.rhesis.ai"
export DEV_AZURE_OPENAI_ENDPOINT="https://your-azure-openai.openai.azure.com/"
export DEV_AZURE_OPENAI_API_KEY="your-azure-openai-api-key"
export DEV_AZURE_OPENAI_DEPLOYMENT_NAME="your-deployment-name"
export DEV_AZURE_OPENAI_API_VERSION="2023-05-15"
export DEV_GEMINI_API_KEY="your-gemini-api-key"
export DEV_GOOGLE_API_KEY="your-google-api-key"
export DEV_GEMINI_MODEL_NAME="gemini-2.0-flash-001"
export DEV_RHESIS_BASE_URL="https://api.rhesis.ai"
export DEV_SMTP_HOST="smtp.example.com"
export DEV_SMTP_PORT="587"
export DEV_SMTP_USER="smtp-user"
export DEV_SMTP_PASSWORD="smtp-password"
export DEV_FROM_EMAIL="engineering@example.com"
export DEV_DEMO_USER_EMAIL="demo@rhesis.ai"
export DEV_DEMO_USER_PASSWORD="PlatypusDemo!"
export DEV_BACKEND_ENV="development"
# Celery worker variables
export DEV_BROKER_URL="rediss://:your-redis-auth-string@your-redis-host:6378/0?ssl_cert_reqs=CERT_NONE"
export DEV_CELERY_RESULT_BACKEND="rediss://:your-redis-auth-string@your-redis-host:6378/1?ssl_cert_reqs=CERT_NONE"
export DEV_CELERY_WORKER_CONCURRENCY="2"
export DEV_CELERY_WORKER_PREFETCH_MULTIPLIER="4"
export DEV_CELERY_WORKER_MAX_TASKS_PER_CHILD="1000"
export DEV_WORKER_ENV="development"

# Frontend variables
export DEV_FRONTEND_ENV="development"
export DEV_NEXTAUTH_URL="https://dev-app.rhesis.ai"
export DEV_NEXTAUTH_SECRET="your-nextauth-secret"
export DEV_NEXT_PUBLIC_API_BASE_URL="https://dev-api.rhesis.ai"
export DEV_BACKEND_URL="https://dev-api.rhesis.ai"
export DEV_AUTH_SECRET="your-auth-secret"
export DEV_GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
export DEV_GOOGLE_CLIENT_SECRET="your-google-client-secret"
export DEV_NEXT_PUBLIC_APP_URL="https://dev-app.rhesis.ai"
export DEV_NEXT_PUBLIC_AUTH0_CLIENT_ID="your-auth0-client-id"
export DEV_NEXT_PUBLIC_AUTH0_DOMAIN="dev-tenant.auth0.com"
export DEV_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-dev:europe-west4:db-dev"

# Staging environment variables
# These will be set in the 'stg' GitHub environment
# Backend variables
export STG_BACKEND_ENV="staging"
export STG_SQLALCHEMY_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-stg:europe-west4:db-stg"
export STG_SQLALCHEMY_DB_MODE="develop"
export STG_SQLALCHEMY_DB_DRIVER="postgresql"
export STG_SQLALCHEMY_DB_USER="rhesis-user"
export STG_SQLALCHEMY_DB_PASS="your-db-password"
export STG_SQLALCHEMY_DB_HOST="/cloudsql/rhesis-stg:europe-west4:db-stg"
export STG_SQLALCHEMY_DB_NAME="rhesis"
export STG_LOG_LEVEL="DEBUG"
export STG_AUTH0_DOMAIN="stg-tenant.auth0.com"
export STG_AUTH0_AUDIENCE="https://api.stg-app.rhesis.ai"
export STG_AUTH0_CLIENT_ID="your-auth0-client-id"
export STG_AUTH0_CLIENT_SECRET="your-auth0-client-secret"
export STG_AUTH0_SECRET_KEY="your-auth0-secret-key"
export STG_JWT_SECRET_KEY="your-jwt-secret-key"
export STG_JWT_ALGORITHM="HS256"
export STG_JWT_ACCESS_TOKEN_EXPIRE_MINUTES="60"
export STG_FRONTEND_URL="https://stg-app.rhesis.ai"
export STG_AZURE_OPENAI_ENDPOINT="https://your-azure-openai.openai.azure.com/"
export STG_AZURE_OPENAI_API_KEY="your-azure-openai-api-key"
export STG_AZURE_OPENAI_DEPLOYMENT_NAME="your-deployment-name"
export STG_AZURE_OPENAI_API_VERSION="2023-05-15"
export STG_GEMINI_API_KEY="your-gemini-api-key"
export STG_GOOGLE_API_KEY="your-google-api-key"
export STG_GEMINI_MODEL_NAME="gemini-2.0-flash-001"
export STG_RHESIS_BASE_URL="https://api.rhesis.ai"
export STG_SMTP_HOST="smtp.example.com"
export STG_SMTP_PORT="587"
export STG_SMTP_USER="smtp-user"
export STG_SMTP_PASSWORD="smtp-password"
export STG_FROM_EMAIL="engineering@example.com"
export STG_DEMO_USER_EMAIL="demo@rhesis.ai"
export STG_DEMO_USER_PASSWORD="PlatypusDemo!"
# Celery worker variables
export STG_WORKER_ENV="staging"
export STG_BROKER_URL="rediss://:your-redis-auth-string@your-redis-host:6378/0?ssl_cert_reqs=CERT_NONE"
export STG_CELERY_RESULT_BACKEND="rediss://:your-redis-auth-string@your-redis-host:6378/1?ssl_cert_reqs=CERT_NONE"
export STG_CELERY_WORKER_CONCURRENCY="2"
export STG_CELERY_WORKER_PREFETCH_MULTIPLIER="4"
export STG_CELERY_WORKER_MAX_TASKS_PER_CHILD="1000"

# Frontend variables
export STG_FRONTEND_ENV="staging"
export STG_NEXTAUTH_URL="https://stg-app.rhesis.ai"
export STG_NEXTAUTH_SECRET="your-nextauth-secret"
export STG_NEXT_PUBLIC_API_BASE_URL="https://stg-api.rhesis.ai"
export STG_BACKEND_URL="https://stg-api.rhesis.ai"
export STG_AUTH_SECRET="your-auth-secret"
export STG_GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
export STG_GOOGLE_CLIENT_SECRET="your-google-client-secret"
export STG_NEXT_PUBLIC_APP_URL="https://stg-app.rhesis.ai"
export STG_NEXT_PUBLIC_AUTH0_CLIENT_ID="your-auth0-client-id"
export STG_NEXT_PUBLIC_AUTH0_DOMAIN="stg-tenant.auth0.com"
export STG_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-stg:europe-west4:db-stg"

# Production environment variables
# These will be set in the 'prd' GitHub environment
# Backend variables
export PRD_BACKEND_ENV="production"
export PRD_SQLALCHEMY_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-prd:europe-west4:db-prd"
export PRD_SQLALCHEMY_DB_MODE="production"
export PRD_SQLALCHEMY_DB_DRIVER="postgresql"
export PRD_SQLALCHEMY_DB_USER="rhesis-user"
export PRD_SQLALCHEMY_DB_PASS="your-db-password"
export PRD_SQLALCHEMY_DB_HOST="/cloudsql/rhesis-prd:europe-west4:db-prd"
export PRD_SQLALCHEMY_DB_NAME="rhesis"
export PRD_LOG_LEVEL="INFO"
export PRD_AUTH0_DOMAIN="tenant.auth0.com"
export PRD_AUTH0_AUDIENCE="https://api.app.rhesis.ai"
export PRD_AUTH0_CLIENT_ID="your-auth0-client-id"
export PRD_AUTH0_CLIENT_SECRET="your-auth0-client-secret"
export PRD_AUTH0_SECRET_KEY="your-auth0-secret-key"
export PRD_JWT_SECRET_KEY="your-jwt-secret-key"
export PRD_JWT_ALGORITHM="HS256"
export PRD_JWT_ACCESS_TOKEN_EXPIRE_MINUTES="30"
export PRD_FRONTEND_URL="https://app.rhesis.ai"
export PRD_AZURE_OPENAI_ENDPOINT="https://your-azure-openai.openai.azure.com/"
export PRD_AZURE_OPENAI_API_KEY="your-azure-openai-api-key"
export PRD_AZURE_OPENAI_DEPLOYMENT_NAME="your-deployment-name"
export PRD_AZURE_OPENAI_API_VERSION="2023-05-15"
export PRD_GEMINI_API_KEY="your-gemini-api-key"
export PRD_GOOGLE_API_KEY="your-google-api-key"
export PRD_GEMINI_MODEL_NAME="gemini-2.0-flash-001"
export PRD_RHESIS_BASE_URL="https://api.rhesis.ai"
export PRD_SMTP_HOST="smtp.example.com"
export PRD_SMTP_PORT="587"
export PRD_SMTP_USER="smtp-user"
export PRD_SMTP_PASSWORD="smtp-password"
export PRD_FROM_EMAIL="engineering@example.com"
export PRD_DEMO_USER_EMAIL="demo@rhesis.ai"
export PRD_DEMO_USER_PASSWORD="PlatypusDemo!"
# Celery worker variables
export PRD_WORKER_ENV="production"
export PRD_BROKER_URL="rediss://:your-redis-auth-string@your-redis-host:6378/0?ssl_cert_reqs=CERT_NONE"
export PRD_CELERY_RESULT_BACKEND="rediss://:your-redis-auth-string@your-redis-host:6378/1?ssl_cert_reqs=CERT_NONE"
export PRD_CELERY_WORKER_CONCURRENCY="2"
export PRD_CELERY_WORKER_PREFETCH_MULTIPLIER="4"
export PRD_CELERY_WORKER_MAX_TASKS_PER_CHILD="1000"

# Frontend variables
export PRD_FRONTEND_ENV="production"
export PRD_NEXTAUTH_URL="https://app.rhesis.ai"
export PRD_NEXTAUTH_SECRET="your-nextauth-secret"
export PRD_NEXT_PUBLIC_API_BASE_URL="https://api.rhesis.ai"
export PRD_BACKEND_URL="https://api.rhesis.ai"
export PRD_AUTH_SECRET="your-auth-secret"
export PRD_GOOGLE_CLIENT_ID="your-google-client-id.apps.googleusercontent.com"
export PRD_GOOGLE_CLIENT_SECRET="your-google-client-secret"
export PRD_NEXT_PUBLIC_APP_URL="https://app.rhesis.ai"
export PRD_NEXT_PUBLIC_AUTH0_CLIENT_ID="your-auth0-client-id"
export PRD_NEXT_PUBLIC_AUTH0_DOMAIN="tenant.auth0.com"
export PRD_DATABASE_URL="postgresql://rhesis-user:password@/rhesis?host=/cloudsql/rhesis-prd:europe-west4:db-prd"

# Test environment variables (for GitHub Actions testing)
# These will be set as environment-specific secrets in the 'test' environment
export TEST_SQLALCHEMY_DB_MODE="test"
export TEST_SQLALCHEMY_DB_DRIVER="postgresql"
export TEST_SQLALCHEMY_DB_USER="rhesis-user"
export TEST_SQLALCHEMY_DB_PASS="test_password_123"
export TEST_SQLALCHEMY_DB_HOST="localhost"
export TEST_SQLALCHEMY_DB_NAME="rhesis-test"
export TEST_LOG_LEVEL="WARNING"
export TEST_AUTH0_DOMAIN="dev-tenant.auth0.com"
export TEST_AUTH0_AUDIENCE="https://api.dev-app.rhesis.ai"
export TEST_AUTH0_CLIENT_ID="your-auth0-client-id"
export TEST_AUTH0_CLIENT_SECRET="your-auth0-client-secret"
export TEST_AUTH0_SECRET_KEY="your-auth0-secret-key"
export TEST_JWT_SECRET_KEY="your-jwt-secret-key"
export TEST_JWT_ALGORITHM="HS256"
export TEST_JWT_ACCESS_TOKEN_EXPIRE_MINUTES="10080"
export TEST_FRONTEND_URL="http://localhost:3000"
export TEST_AZURE_OPENAI_ENDPOINT="https://your-azure-openai.openai.azure.com/"
export TEST_AZURE_OPENAI_API_KEY="your-azure-openai-api-key"
export TEST_AZURE_OPENAI_DEPLOYMENT_NAME="your-deployment-name"
export TEST_AZURE_OPENAI_API_VERSION="2023-05-15"
export TEST_GEMINI_API_KEY="your-gemini-api-key"
export TEST_GEMINI_MODEL_NAME="gemini-2.0-flash-001"
export TEST_SMTP_HOST="smtp.example.com"
export TEST_SMTP_PORT="587"
export TEST_SMTP_USER="smtp-user"
export TEST_SMTP_PASSWORD="smtp-password"
export TEST_FROM_EMAIL="engineering@example.com"
export TEST_DEMO_USER_EMAIL="demo@rhesis.ai"
export TEST_DEMO_USER_PASSWORD="PlatypusDemo!"
export TEST_REDIS_URL="redis://localhost:6379"
export TEST_BROKER_URL="redis://localhost:6379/0"
export TEST_CELERY_RESULT_BACKEND="redis://localhost:6379/0"

# Get the GitHub repository from the current directory or specify it manually
REPO=$(gh repo view --json nameWithOwner -q .nameWithOwner 2>/dev/null || echo "")

if [[ -z "$REPO" ]]; then
  # If automatic detection fails, specify your repository manually
  REPO="your-org/your-repo"
fi

# Run the setup script
./service-secrets-create.sh --repo "$REPO" 