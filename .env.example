#####################################################################################
# üöÄ RHESIS APPLICATION CONFIGURATION
#####################################################################################
# This file contains all environment variables needed to run the Rhesis application.
# Copy this file to .env and fill in your actual values.
#
# üìã CONFIGURATION CATEGORIES:
# 1. üîß USER-DEFINED (Required) - You MUST set these values
# 2. ‚öôÔ∏è  OPTIONAL (Recommended) - Set these for enhanced functionality
# 3. üèóÔ∏è  RHESIS-DEFINED (Don't change) - Internal configuration
#
# üí° TIP: Start with USER-DEFINED variables, then add OPTIONAL ones as needed.
#####################################################################################

#####################################################################################
# üîß USER-DEFINED CONFIGURATION (REQUIRED)
# These variables MUST be set for the application to run properly
#####################################################################################

# =============================================================================
# üîê AUTHENTICATION & AUTHORIZATION
# =============================================================================
# Auth0 Configuration - Get these from https://manage.auth0.com/
# Create an Auth0 application and API to get these values
AUTH0_DOMAIN=your-tenant.auth0.com
AUTH0_AUDIENCE=https://api.yourdomain.com
AUTH0_CLIENT_ID=your-auth0-client-id
AUTH0_CLIENT_SECRET=your-auth0-client-secret
AUTH0_SECRET_KEY=your-jwt-secret-key

# JWT Configuration
JWT_SECRET_KEY=your-jwt-secret-key

# NextAuth Configuration
NEXTAUTH_SECRET=your-nextauth-secret

# Frontend Auth0 Configuration (public)
NEXT_PUBLIC_AUTH0_CLIENT_ID=your-auth0-client-id
NEXT_PUBLIC_AUTH0_DOMAIN=your-tenant.auth0.com

# =============================================================================
# üåê GOOGLE AUTHENTICATION
# =============================================================================
# Google OAuth (for Google sign-in)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# =============================================================================
# üóÑÔ∏è Database Encryption Key.
# =============================================================================
# Database Encryption Key (REQUIRED for database field encryption)
# Generate a new key using: uv run --with cryptography python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
DB_ENCRYPTION_KEY=BASE64_ENCODED_DB_ENCRYPTION_KEY


#####################################################################################
# ‚öôÔ∏è OPTIONAL CONFIGURATION (RECOMMENDED)
# These variables enhance functionality but are not required for basic operation
#####################################################################################

# =============================================================================
# ü§ñ AI MODEL CONFIGURATION
# =============================================================================
# Choose one or more AI providers based on your needs

# Azure OpenAI (if using Azure)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_API_VERSION=2024-02-15-preview

# OpenAI (if using OpenAI directly)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL_NAME=gpt-4o

# Google Gemini (if using Google AI)
GEMINI_API_KEY=your-gemini-api-key
GOOGLE_API_KEY=your-google-api-key
GEMINI_MODEL_NAME=gemini-2.0-flash-001

# =============================================================================
# üìß EMAIL CONFIGURATION
# =============================================================================
# SMTP settings for email notifications (optional)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=465
SMTP_USER=your-smtp-username
SMTP_PASSWORD=your-smtp-password
FROM_EMAIL=noreply@yourdomain.com


# =============================================================================
# üîó EXTERNAL SERVICES
# =============================================================================
# Worker API URL (if using external worker service)
WORKER_API_URL=http://localhost:8081

# Rhesis API Key (if using external Rhesis services)
RHESIS_API_KEY=your-rhesis-api-key

#####################################################################################
# üèóÔ∏è RHESIS-DEFINED CONFIGURATION (DON'T CHANGE)
# These are internal application settings - modify only if you know what you're doing
# Only change the "your-secured-password" with strong passwords for Database and Redis
# Must change the Database and Redis Configuration for the Production deployment
#####################################################################################

# =============================================================================
# üóÑÔ∏è DATABASE INTERNAL CONFIGURATION
# =============================================================================
# SQLAlchemy Database Configuration
SQLALCHEMY_DB_DRIVER=postgresql
SQLALCHEMY_DB_USER=rhesis-user
SQLALCHEMY_DB_PASS=your-secured-password
SQLALCHEMY_DB_HOST=postgres
SQLALCHEMY_DB_NAME=rhesis-db

# postgres is the db container name in this url
SQLALCHEMY_DATABASE_URL=postgresql://rhesis-user:your-secured-password@postgres:5432/rhesis-db

# =============================================================================
# üî¥ REDIS INTERNAL CONFIGURATION
# =============================================================================
# Redis URLs
REDIS_PORT=6379
REDIS_PASSWORD=your-secured-password
REDIS_URL=redis://:your-secured-password@redis:6379/0
BROKER_URL=redis://:your-secured-password@redis:6379/0
CELERY_RESULT_BACKEND=redis://:your-secured-password@redis:6379/1

# =============================================================================
# üåê SERVICE CONFIGURATION
# =============================================================================
# Service Ports
BACKEND_PORT=8080
FRONTEND_PORT=3000

# Environment Settings
ENVIRONMENT=local
FRONTEND_ENV=local
BACKEND_ENV=local
WORKER_ENV=local
LOG_LEVEL=INFO

# =============================================================================
# üîó INTERNAL URLS
# =============================================================================
# Application URLs
RHESIS_BASE_URL=http://localhost:8080
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://backend:8080
NEXT_PUBLIC_API_BASE_URL=http://localhost:8080
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_URL=http://localhost:3000


# =============================================================================
# üìä JWT INTERNAL CONFIGURATION
# =============================================================================
# JWT Settings
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440

# =============================================================================
# üè† LOCAL DEVELOPMENT
# =============================================================================
# For local development (outside Docker)
DATABASE_URL=postgresql://rhesis-user:your-secured-password@localhost:5432/rhesis-db

# Development paths (adjust as needed)
RHESIS_BASE_PATH=/path/to/your/rhesis/project/
LOCAL_STORAGE_PATH=/tmp/rhesis-files   # fallback for local development
# Optional: set these if you want to access GCS locally
# STORAGE_SERVICE_URI=gs://sources-rhesis-dev
# STORAGE_SERVICE_ACCOUNT_KEY='your-base64-service-account-key'


# OpenTelemetry Configuration (Optional)
# Used for collecting telemetry data (traces, metrics) for monitoring

# OTel Collector endpoint (where telemetry data is sent)
OTEL_EXPORTER_OTLP_ENDPOINT=https://rhesis-otel-collector-dev-235yqdecwq-uc.a.run.app/
OTEL_SERVICE_NAME=rhesis-backend
OTEL_DEPLOYMENT_TYPE=self-hosted

# Enable/disable telemetry collection
# Self-hosted: opt-in (set to true to enable)
OTEL_RHESIS_TELEMETRY_ENABLED=true

#####################################################################################
# üìö QUICK START GUIDE
#####################################################################################
# 1. Copy this file: cp .env.example .env.docker
# 2. Set required USER-DEFINED variables (minimum for basic operation):
# 3. Optionally set OPTIONAL variables for enhanced functionality
# 4. Change the "your-secured-password" with strong secured passwords for Database and Redis
# 5. Run the application: docker compose --env-file .env.docker up
#####################################################################################
