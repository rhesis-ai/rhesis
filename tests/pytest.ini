[pytest]
# Pytest configuration for the Rhesis test suite
asyncio_default_fixture_loop_scope = function

# Test collection configuration
# Exclude SQLAlchemy models and SDK modules from being collected as test classes
norecursedirs = */app/models/* */sdk/*

# Suppress deprecation warnings
filterwarnings =
    ignore::pytest.PytestDeprecationWarning:pytest_asyncio.plugin
    ignore::DeprecationWarning:websockets.legacy
    ignore:websockets.legacy is deprecated:DeprecationWarning
    ignore:transaction already deassociated from connection:sqlalchemy.exc.SAWarning
    ignore:cannot collect test class.*because it has a __init__ constructor:pytest.PytestCollectionWarning
    ignore:Pydantic serializer warnings:UserWarning

# Common markers used across components
markers =
    unit: fast tests with mocked dependencies
    integration: tests with real external services
    slow: tests that take >5 seconds
    ai: tests involving AI model calls
    critical: core functionality tests
    security: security and vulnerability tests
    performance: performance and load testing
    service: tests for service layer functions
    services: tests for service layer functions (alternative naming)
    utils: tests for utility functions
    crud: tests for CRUD operations
    database: tests that require database connectivity
    transaction: tests for transaction management
    tasks: tests for background tasks
    auth: tests for authentication and authorization
    routes: tests for API route endpoints