{% extends "base.jinja" %}

{% block specific_requirements %}
{% if specific_requirements %}
### Specific Requirements
{{ specific_requirements }}
### End of Specific Requirements
{% endif %}

{% if project_context %}
### Project Context
{{ project_context }}
### End of Project Context
{% endif %}


{% if rated_samples and rated_samples|length > 0 %}
### User Feedback and Ratings:
The user has been iterating on test generation. Here are examples of tests they rated, which will help you understand what they're looking for:
{% for sample in rated_samples %}
- Test: "{{ sample.prompt }}"
  - Rating: {{ sample.rating }}/5
  {% if sample.feedback %}  - Feedback: {{ sample.feedback }}{% endif %}
{% endfor %}

Use this feedback to adjust the test generation to better match the user's expectations. Learn from both high-rated tests (what worked well) and low-rated tests (what to avoid or improve).
### End of User Feedback and Ratings
{% endif %}

{% if previous_messages and previous_messages|length > 0 %}
### Previous Conversation Context:
Previous Conversation Context:
The user has been refining their test requirements through conversation. Consider this context when generating the configuration:
{% for msg in previous_messages %}
- User: "{{ msg.content }}"
{% endfor %}
### End of Previous Conversation Context
{% endif %}

{% endblock %}
